<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Schülerdetails</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="top-buttons" style="display: flex; justify-content: flex-start;">
        <a href="/class_details_teacher/{{ class_id }}/{{ teacher_id }}" class="button">Zurück zur Klasse</a>
    </div>

    <h1>{{ student_info['name'] }}</h1>
    <h3>Informationen:</h3>
    <ul class="info-list">
        <li>Email: {{ student_info['email'] }}</li>
        <li>Skill Level (Klasse): {{ student_info['class_skill_level'] }}</li>
        <li> Durchschnitt richtiger Antworten pro Hausaufgabe: {{ mean_correct }}</li>
    </ul>

    <h2>Fortschritt über die Zeit</h2>
    <div class="charts-container">
        <!-- Fragen-Fortschritt -->
        <div class="chart-container">
            <canvas id="progressChart"></canvas>
        </div>
    
        <!-- Skill-Level-Fortschritt -->
        <div class="chart-container">
            <canvas id="skillChart"></canvas>
        </div>
    </div>
    
    <script>
        // Erste Grafik - Fragen-Fortschritt
        const ctx1 = document.getElementById('progressChart').getContext('2d');
        const data1 = {
            labels: {{ dates | tojson }},
            datasets: [{
                label: 'Richtige Antworten',
                data: {{ correct_counts | tojson }},
                borderColor: 'rgba(75, 192, 192, 1)',
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderWidth: 2,
                fill: true,
                tension: 0.2,
                pointRadius: 5,
                pointHoverRadius: 7
            }]
        };
    
        const config1 = {
            type: 'line',
            data: data1,
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                    title: {
                        display: true,
                        text: 'Fragen-Fortschritt',
                        font: { size: 20 }
                    }
                },
                scales: {
                    x: { title: { display: true, text: 'Datum' } },
                    y: { title: { display: true, text: 'Richtige Antworten' }, beginAtZero: true }
                }
            }
        };
        new Chart(ctx1, config1);
    
        // Zweite Grafik - Skill-Level-Fortschritt
        const ctx2 = document.getElementById('skillChart').getContext('2d');
        const data2 = {
            labels: {{ skill_dates | tojson }},
            datasets: [{
                label: 'Skill Level',
                data: {{ skill_levels | tojson }},
                borderColor: 'rgba(255, 99, 132, 1)',
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderWidth: 2,
                fill: true,
                tension: 0.2,
                pointRadius: 5,
                pointHoverRadius: 7
            }]
        };
    
        const config2 = {
            type: 'line',
            data: data2,
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                    title: {
                        display: true,
                        text: 'Skill-Level-Fortschritt',
                        font: { size: 20 }
                    }
                },
                scales: {
                    x: { title: { display: true, text: 'Datum' } },
                    y: { title: { display: true, text: 'Skill Level' }, beginAtZero: true, min: 1, max: 10 }
                }
            }
        };
        new Chart(ctx2, config2);
    </script>
    
</body>
</html>
